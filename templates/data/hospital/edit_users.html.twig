{% extends 'data/hospital/_edit_base.html.twig' %}

{% block title %}{{ "title.hospital_edit"|trans }}: {{ hospital.name }} - {{ "title.data"|trans }} - {{ parent() }}{% endblock %}

{% block header %}
    {% embed "embeds/header.html.twig" %}
        {% block header_after %}
            {% include 'data/_subnav.html.twig' %}
        {% endblock %}
    {% endembed %}
{% endblock %}

{% block card %}
    {{ form_start(form) }}
        <div class="card-body">
            <h4>{{ "label.users"|trans }}</h4>

            <div {{ stimulus_controller('form-collection') }}
                data-form-collection-index-value="{{ form.associatedUsers|length > 0 ? form.associatedUsers|last.vars.name + 1 : 0 }}"
                data-form-collection-prototype-value="{{ form_widget(form.associatedUsers.vars.prototype)|e('html_attr') }}"
            >
                <ul {{ stimulus_target('form-collection', 'collectionContainer') }}></ul>
                <button type="button" {{ stimulus_action('form-collection', 'addCollectionElement') }}>Add a User</button>
            </div>
        </div>
        <div class="card-footer">
            <div class="btn-list justify-content-end">
                <a href="{{ path('app_data_hospital_show', {id: hospital.id}) }}" class="btn">
                    {{ "label.cancel"|trans }}
                </a>
                <button class="btn btn-primary" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circle-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0" />
                        <path d="M9 12h6" />
                        <path d="M12 9v6" />
                    </svg>
                    {{ "label.save_changes"|trans }}
                </button>
            </div>
        </div>
    {{ form_end(form) }}
{% endblock %}
